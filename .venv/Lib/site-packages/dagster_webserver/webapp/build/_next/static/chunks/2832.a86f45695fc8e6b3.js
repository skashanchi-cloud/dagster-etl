"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2832],{21047:(e,n,t)=>{t.d(n,{A1:()=>b,Z1:()=>_});var s=t(99649),o=t(93096),r=t(9329),i=t(6029),a=t(55729),l=t(3102),d=t(99121),p=t(39678),h=t(86400),c=t(77439),u=t(85347),x=t(25217),m=t(32857),j=t(24371),g=t(10740),f=t(15250),v=t(56808),S=t(78351),I=t(27235),y=t(72104),N=t(87104),P=t(21870);function E(){let e=(0,r._)(["\n  query PipelineExplorerRootQuery(\n    $snapshotPipelineSelector: PipelineSelector\n    $snapshotId: String\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    pipelineSnapshotOrError(\n      snapshotId: $snapshotId\n      activePipelineSelector: $snapshotPipelineSelector\n    ) {\n      ... on PipelineSnapshot {\n        id\n        name\n        metadataEntries {\n          ...MetadataEntryFragment\n        }\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n            definition {\n              assetNodes {\n                id\n                ...GraphExplorerAssetNodeFragment\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PipelineSnapshotNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return E=function(){return e},e}let b=()=>{(0,m.b7)();let e=(0,l.g)(),n=(0,c.iI)(e["0"]),{pipelineName:t,snapshotId:s}=n,o=(0,l.W6)(),r=(0,S.e)();return(0,v.r)("Snapshot: ".concat(t).concat(s?"@".concat(s.slice(0,8)):"")),(0,i.jsx)(_,{explorerPath:n,onChangeExplorerPath:(e,n)=>{o[n]("/snapshots/".concat((0,c.ZG)(e)))},onNavigateToSourceAssetNode:(e,n)=>{let{assetKey:t}=n,s=(0,f.Q)(t);e.metaKey?r(s):o.push((0,f.Q)(t))}})},_=e=>{var n;let{explorerPath:t,repoAddress:r}=e,l=(0,P.JJ)(r,t.pipelineName),[d,p]=(0,a.useState)({explodeComposites:null!=(n=t.explodeComposites)&&n,preferAssetRendering:!0}),h=!!l&&null!==l.externalJobSource;(0,a.useEffect)(()=>(h!==d.isExternal&&p((0,o._)((0,s._)({},d),{isExternal:h})),()=>{}),[h,d]);let[c,u]=(0,I.S)("hideEdgesToNodesOutsideQuery",e=>"false"!==e&&!1!==e);if(l&&l.isAssetJob&&d.preferAssetRendering){let n=(0,P.ee)(r||null,t.pipelineName);return(0,i.jsx)(j.uj,{options:d,setOptions:p,fetchOptions:{pipelineSelector:n,hideEdgesToNodesOutsideQuery:c},explorerPath:t,onChangeExplorerPath:e.onChangeExplorerPath,onNavigateToSourceAssetNode:e.onNavigateToSourceAssetNode,viewType:g.kh.JOB,setHideEdgesToNodesOutsideQuery:u},t.pipelineName)}return(0,i.jsx)(A,(0,o._)((0,s._)({},e),{options:d,setOptions:p}))},A=e=>{let{explorerPath:n,repoAddress:t,onChangeExplorerPath:s,onNavigateToSourceAssetNode:o,isGraph:r=!1,options:a,setOptions:l}=e,c=n.opNames.slice(0,n.opNames.length-1),x=(0,P.ee)(t||null,n.pipelineName),m=(0,u.IT)(H,{variables:{snapshotPipelineSelector:n.snapshotId?void 0:x,snapshotId:n.snapshotId?n.snapshotId:void 0,rootHandleID:c.join("."),requestScopeHandleID:a.explodeComposites?void 0:c.join(".")}});return(0,i.jsx)(N.R,{queryResult:m,children:e=>{let{pipelineSnapshotOrError:c}=e;if("PipelineSnapshot"!==c.__typename)return(0,i.jsx)(h.s,{isGraph:r,result:c,repoAddress:t});let u=c.solidHandle,m=a.explodeComposites?(0,d.$)(c.solidHandles):c.solidHandles,f=c.solidHandles.some(e=>e.solid.definition.assetNodes.length>0);return a.preferAssetRendering&&f?(0,i.jsx)(j.uj,{options:a,setOptions:l,fetchOptions:{pipelineSelector:x},explorerPath:n,onChangeExplorerPath:s,onNavigateToSourceAssetNode:o,viewType:g.kh.JOB}):(0,i.jsx)(p.Uh,{options:a,setOptions:l,explorerPath:n,onChangeExplorerPath:s,container:c,repoAddress:t,handles:m,parentHandle:u||void 0,isGraph:r,getInvocations:e=>m.filter(n=>n.solid.definition.name===e).map(e=>({handleID:e.handleID}))})}})},H=(0,u.J1)(E(),y.U,p.G4,p.zO,p.wo,x.z)},32832:(e,n,t)=>{t.r(n),t.d(n,{SnapshotRoot:()=>E,default:()=>b});var s=t(6029),o=t(3102),r=t(21047),i=t(99649),a=t(93096),l=t(9329),d=t(26277),p=t(43697),h=t(3066),c=t(41241),u=t(44263),x=t(38584),m=t(85347),j=t(77439),g=t(85725),f=t(21870),v=t(25909);function S(){let e=(0,l._)(["\n  query SnapshotQuery($snapshotId: String!) {\n    pipelineSnapshotOrError(snapshotId: $snapshotId) {\n      ... on PipelineSnapshot {\n        id\n        parentSnapshotId\n      }\n    }\n  }\n"]);return S=function(){return e},e}let I=(0,m.J1)(S()),y=e=>{var n;let{activeTab:t="",explorerPath:o}=e,{pipelineName:r,snapshotId:l=""}=o,S=(0,j.ZG)((0,a._)((0,i._)({},o),{opNames:[]})),y=(0,f.sZ)(r),N=null==y?void 0:y.pipelineSnapshotId,{data:P,loading:E}=(0,m.IT)(I,{variables:{snapshotId:l}});return(0,s.jsx)(p.z,{title:(0,s.jsx)(h.M7,{style:{fontFamily:c.a.monospace,fontSize:"16px"},children:null==(n=o.snapshotId)?void 0:n.slice(0,8)}),tags:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.v,{icon:"schema",children:["Snapshot of"," ",(0,s.jsx)(x.N_,{to:(0,v.KU)(o.pipelineName),children:o.pipelineName})]}),(()=>{var e;return E?(0,s.jsx)(d.v,{intent:"none",minimal:!0,children:"..."}):N&&(N===l||(null==P?void 0:P.pipelineSnapshotOrError.__typename)!=="PipelineSnapshot"||(null==P||null==(e=P.pipelineSnapshotOrError)?void 0:e.parentSnapshotId)===N)?(0,s.jsx)(d.v,{intent:"success",minimal:!0,children:"Current"}):(0,s.jsx)(d.v,{intent:"warning",minimal:!0,children:"Snapshot"})})()]}),tabs:(0,s.jsx)(u.tU,{selectedTabId:t,children:[{text:"Definition",pathComponent:"",href:"/snapshots/".concat(S)},{text:"Runs",pathComponent:"runs",href:"/snapshots/".concat(S,"runs")}].map(e=>{let{href:n,text:t,pathComponent:o}=e;return(0,s.jsx)(g.s,{id:o,title:t,to:n},t)})})})};var N=t(11810),P=t(76659);let E=()=>{let{pipelinePath:e,tab:n}=(0,o.g)(),t=(0,j.iI)(e);return(0,s.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,s.jsx)(y,{activeTab:n,explorerPath:t}),(0,s.jsxs)(o.dO,{children:[(0,s.jsx)(N.q,{path:"/snapshots/:pipelinePath/runs",children:(0,s.jsx)(P.n,{})}),(0,s.jsx)(N.q,{path:"/snapshots/(/?.*)",children:(0,s.jsx)(r.A1,{})})]})]})},b=E},76659:(e,n,t)=>{t.d(n,{n:()=>O});var s=t(99649),o=t(93096),r=t(6029),i=t(58323),a=t(83150),l=t(26277),d=t(96331),p=t(55729),h=t(3102),c=t(77439),u=t(33762),x=t(33658),m=t(35171),j=t(21870),g=t(25909);let f=e=>{let{repoAddress:n,anyFilter:t,jobName:s,jobPath:o}=e,i=(0,j.GK)(n),l=(0,j.PO)(i,s),d=(0,j._z)(i,s);return(0,r.jsx)(a.a,{padding:{vertical:64},children:(0,r.jsx)(x.I,{icon:"run",title:"No runs found",description:n?d?(0,r.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this external job."}):l?(0,r.jsxs)(a.a,{flex:{direction:"column",gap:12},children:[(0,r.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,r.jsx)("div",{children:(0,r.jsx)(m.A,{icon:(0,r.jsx)(u.In,{name:"materialization"}),to:(0,g.HG)(n,"/jobs/".concat(o)),children:"Materialize an asset"})})]}):(0,r.jsxs)(a.a,{flex:{direction:"column",gap:12},children:[(0,r.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,r.jsx)("div",{children:(0,r.jsx)(m.A,{icon:(0,r.jsx)(u.In,{name:"add_circle"}),to:(0,g.HG)(n,"/jobs/".concat(o,"/playground")),children:"Launch a run"})})]}):(0,r.jsx)("div",{children:"You have not launched any runs for this job."})})})};var v=t(76309),S=t(98394),I=t(32857),y=t(66822),N=t(61365),P=t(89250),E=t(27680),b=t(63510),_=t(36152),A=t(89010),H=t(67402);let C=["status","tag","id","created_date_before","created_date_after"],O=e=>{(0,I.b7)();let{pipelinePath:n}=(0,h.g)(),{repoAddress:t=null}=e,u=(0,c.iI)(n),{pipelineName:x,snapshotId:m}=u,g=(0,j.GK)(t),O=(0,j.Ji)(g,x);(0,v.J)(u,O);let[T,D]=(0,_.HB)(C),k=(0,p.useMemo)(()=>[O?{token:"job",value:x}:{token:"pipeline",value:x},m?{token:"snapshotId",value:m}:null].filter(Boolean),[O,x,m]),w=(0,p.useMemo)(()=>{let e=[...T,...k];if(t){let n={token:"tag",value:"".concat(N.d.RepositoryLabelTag,"=").concat((0,H.DV)(t))};e.push(n)}return(0,o._)((0,s._)({},(0,_.Us)(e)),{pipelineName:x,snapshotId:m})},[T,k,x,t,m]),G=(0,p.useCallback)(e=>{let n=(0,i.AY)(e);T.some(e=>(0,i.AY)(e)===n)||D([...T,e])},[T,D]),{entries:F,paginationProps:R,queryResult:$}=(0,A.A)({filter:w,skip:!1,view:y.ivR.RUNS}),J=(0,S.Bj)($,S.eO),{button:q,activeFiltersJsx:z}=(0,_.QR)({enabledFilters:C,tokens:T,onChange:D,loading:$.loading}),B=(0,r.jsxs)(a.a,{flex:{direction:"row",gap:8,alignItems:"center"},style:{width:"100%"},padding:{right:16},children:[q,(0,r.jsx)("div",{style:{flex:1}}),(0,r.jsx)(S.D7,{refreshState:J})]}),Q=(0,r.jsxs)(a.a,{flex:{direction:"row",gap:4,alignItems:"center"},children:[k.map(e=>{let{token:n,value:t}=e;return(0,r.jsx)(l.v,{children:"".concat(n,":").concat(t)},n)}),z,z.length>0&&(0,r.jsx)(d.v,{onClick:()=>D([]),children:"Clear all"})]});return(0,r.jsx)(P.rw.Provider,{value:{refetch:J.refetch},children:$.error?(0,r.jsx)(E.h,{error:$.error}):(0,r.jsx)("div",{style:{minHeight:0},children:(0,r.jsx)(b.V,{entries:F,loading:$.loading,onAddTag:G,refetch:J.refetch,actionBarComponents:B,belowActionBarComponents:Q,paginationProps:R,filter:w,emptyState:()=>(0,r.jsx)(f,{repoAddress:t,anyFilter:T.length>0,jobName:x,jobPath:n})})})})}}}]);
//# sourceMappingURL=2832.a86f45695fc8e6b3.js.map
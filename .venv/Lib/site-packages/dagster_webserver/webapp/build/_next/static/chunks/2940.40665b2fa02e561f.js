"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2940],{22940:(e,s,n)=>{n.d(s,{J:()=>X,H:()=>G});var r=n(99649),t=n(93096),i=n(9329),l=n(6029),o=n(83150),c=n(83007),a=n(78046),d=n(43697),h=n(3066),x=n(26277),j=n(93955),u=n(91232),p=n(96331),m=n(30626),g=n(40264),y=n(56329),f=n(33658),v=n(33762),b=n(42932);n(55729);var R=n(3102),w=n(38584),_=n(44263),D=n(85725),I=n(25909);let U={configuration:"Configuration",uses:"Uses"},E=e=>{let{repoAddress:s,resourceName:n,numUses:r}=e,t=(0,R.W5)(["/locations/:repoPath/resources/:name/:tab?"]),i=(null==t?void 0:t.params.tab)&&U[null==t?void 0:t.params.tab]||"Configuration";return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(_.tU,{size:"large",selectedTabId:i,children:[(0,l.jsx)(D.s,{id:"Configuration",title:"Configuration",to:(0,I.HG)(s,"/resources/".concat(n))},"configuration"),(0,l.jsx)(D.s,{id:"Uses",title:(0,l.jsxs)(o.a,{flex:{gap:4,alignItems:"center"},children:["Uses",(0,l.jsx)(x.v,{intent:"none",minimal:!0,children:r})]}),to:(0,I.HG)(s,"/resources/".concat(n,"/uses"))},"uses")]})})};var N=n(85347),S=n(21403),O=n(25217),T=n(32857),A=n(5125),L=n(56808),W=n(1613),H=n(87104),V=n(71519),C=n(61803);function F(){let e=(0,i._)(["\n  fragment ResourceDetailsFragment on ResourceDetails {\n    name\n    description\n    configFields {\n      name\n      description\n      configTypeKey\n      isRequired\n      defaultValueAsJson\n    }\n    configuredValues {\n      key\n      value\n      type\n    }\n    nestedResources {\n      name\n      type\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    parentResources {\n      name\n      resource {\n        name\n        resourceType\n        description\n      }\n    }\n    assetKeysUsing {\n      path\n    }\n    schedulesUsing\n    sensorsUsing\n    jobsOpsUsing {\n      jobName\n      opHandleIDs\n    }\n    resourceType\n  }\n"]);return F=function(){return e},e}function k(){let e=(0,i._)(["\n  query ResourceRootQuery($resourceSelector: ResourceSelector!) {\n    topLevelResourceDetailsOrError(resourceSelector: $resourceSelector) {\n      ...ResourceDetailsFragment\n      ...PythonErrorFragment\n    }\n  }\n  ","\n  ","\n"]);return k=function(){return e},e}let P=e=>"StringSourceType"===e?"String":"IntSourceType"===e?"Int":"BoolSourceType"===e?"Bool":e,G=e=>(null==e?void 0:e.split(".").pop())||null,K=e=>e?e.name.startsWith("_nested_")?G(null==e?void 0:e.resourceType):e.name:null,z=e=>(0,l.jsx)(o.a,{padding:{left:24,vertical:16},background:c.GW(),border:"all",children:e.children}),J=e=>e.split("\n").map(e=>e.replace(/^    /,"")).join("\n"),X=e=>{var s,n,i,y;(0,T.b7)();let{repoAddress:f}=e,{resourceName:v}=(0,R.g)();(0,L.r)("Resource: ".concat(v));let b=(0,t._)((0,r._)({},(0,C.n)(f)),{resourceName:v}),w=(0,N.IT)(Z,{variables:{resourceSelector:b}}),_=(null==(s=w.data)?void 0:s.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"&&K(null==(n=w.data)?void 0:n.topLevelResourceDetailsOrError)||v,D=(null==(i=w.data)?void 0:i.topLevelResourceDetailsOrError.__typename)==="ResourceDetails"?w.data.topLevelResourceDetailsOrError.parentResources.length+w.data.topLevelResourceDetailsOrError.assetKeysUsing.length+w.data.topLevelResourceDetailsOrError.jobsOpsUsing.length+w.data.topLevelResourceDetailsOrError.schedulesUsing.length+w.data.topLevelResourceDetailsOrError.sensorsUsing.length:0,I=null==(y=(0,R.W5)(["/locations/:repoPath/resources/:name/:tab?"]))?void 0:y.params.tab;return(0,l.jsxs)(a.Y,{style:{height:"100%",overflow:"hidden"},children:[(0,l.jsx)(d.z,{title:(0,l.jsx)(h.M7,{children:_}),tags:(0,l.jsxs)(x.v,{icon:"resource",children:["Resource in ",(0,l.jsx)(W.p,{repoAddress:f})]}),tabs:(0,l.jsx)(E,{repoAddress:f,resourceName:v,numUses:D})}),(0,l.jsx)(H.R,{queryResult:w,allowStaleData:!0,children:e=>{let{topLevelResourceDetailsOrError:s}=e;if("ResourceDetails"!==s.__typename){let e=null;return"PythonError"===s.__typename&&(e=s.message),(0,l.jsx)(j.F,{intent:"warning",title:(0,l.jsxs)(u.Y,{direction:"row",spacing:4,children:[(0,l.jsx)("div",{children:"Could not load resource."}),e&&(0,l.jsx)(p.v,{color:c.Hv(),underline:"always",onClick:()=>{(0,S.vI)({title:"Python error",body:e})},children:"View error"})]})})}let n=G(s.resourceType);return(0,l.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,l.jsx)(m.c,{identifier:"resource-explorer",firstInitialPercent:50,firstMinSize:400,first:(0,l.jsx)(o.a,{padding:{bottom:48},style:{overflowY:"auto"},children:"uses"===I?(0,l.jsx)(q,{resourceDetails:s,repoAddress:f,numUses:D}):(0,l.jsx)(Y,{resourceDetails:s,repoAddress:f})}),second:(0,l.jsxs)(o.a,{padding:{bottom:48},style:{overflowY:"auto"},children:[(0,l.jsxs)(o.a,{flex:{gap:4,direction:"column"},margin:{left:24,right:12,vertical:16},children:[(0,l.jsx)(h.DZ,{children:_}),(0,l.jsx)(g.m,{content:s.resourceType||"",children:(0,l.jsx)(h.Kp,{children:n})})]}),(0,l.jsx)(o.a,{border:"top-and-bottom",background:c.GW(),padding:{vertical:8,horizontal:24},style:{fontSize:"12px",fontWeight:500},children:"Description"}),(0,l.jsx)(o.a,{padding:{horizontal:24,vertical:16},children:s.description?(0,l.jsx)(V.o,{children:J(s.description)}):"None"})]})})})}})]})},Y=e=>{let{resourceDetails:s,repoAddress:n}=e,r=Object.fromEntries(s.configuredValues.map(e=>[e.key,{value:e.value,type:e.type}])),t=s.nestedResources;return(0,l.jsxs)(l.Fragment,{children:[t.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(z,{children:(0,l.jsx)(h.R2,{children:"Resource dependencies"})}),(0,l.jsxs)(y.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:120},children:"Key"}),(0,l.jsx)("th",{style:{width:180},children:"Resource"})]})}),(0,l.jsx)("tbody",{children:t.map(e=>{let s="TOP_LEVEL"===e.type&&e.resource?(0,l.jsx)(M,{url:(0,I.HG)(n,"/resources/".concat(e.name)),name:K(e.resource)||"",description:e.resource.description||void 0},e.name):(0,l.jsx)(M,{name:e.name},e.name);return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsx)("strong",{children:e.name})}),(0,l.jsx)("td",{colSpan:2,children:s})]},e.name)})})]})]}),(0,l.jsxs)(o.a,{children:[(0,l.jsx)(z,{children:(0,l.jsx)(h.R2,{children:"Configuration"})}),(0,l.jsxs)(y.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:120},children:"Key"}),(0,l.jsx)("th",{style:{width:90},children:"Type"}),(0,l.jsx)("th",{style:{width:90},children:"Value"})]})}),(0,l.jsx)("tbody",{children:0===s.configFields.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:3,children:(0,l.jsx)(o.a,{padding:{vertical:8},children:(0,l.jsx)(f.I,{icon:"settings",title:"No configuration",description:"This resource has no configuration fields."})})})}):s.configFields.map(e=>{let s=e.defaultValueAsJson,n=r.hasOwnProperty(e.name)?r[e.name].type:null,t=r.hasOwnProperty(e.name)?r[e.name].value:s,i="VALUE"===n&&s===t;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"column",gap:4,alignItems:"flex-start"},children:[(0,l.jsx)("strong",{children:e.name}),(0,l.jsx)("div",{style:{fontSize:12,color:c.XN()},children:e.description})]})}),(0,l.jsx)("td",{children:P(e.configTypeKey)}),(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"row",gap:16},children:[(0,l.jsx)(g.m,{content:(0,l.jsxs)(l.Fragment,{children:["Default: ",s]}),canShow:!i&&!!s,children:"ENV_VAR"===n?(0,l.jsx)(x.v,{children:t}):t}),i&&(0,l.jsx)(x.v,{children:"Default"}),"ENV_VAR"===n&&(0,l.jsx)(x.v,{intent:"success",children:"Env var"})]})})]},e.name)})})]})]})]})},q=e=>{let{resourceDetails:s,repoAddress:n,numUses:r}=e;if(0===r)return(0,l.jsx)(o.a,{padding:{vertical:16},children:(0,l.jsx)(f.I,{icon:"list",title:"No uses",description:"This resource is not used by any assets or resources."})});let t=s.parentResources;return(0,l.jsxs)(l.Fragment,{children:[t.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(z,{children:(0,l.jsx)(h.R2,{children:"Parent resources"})}),(0,l.jsxs)(y.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Resource"})})}),(0,l.jsx)("tbody",{children:t.map(e=>e.resource&&(0,l.jsx)("tr",{children:(0,l.jsx)("td",{children:(0,l.jsx)(M,{url:(0,I.HG)(n,"/resources/".concat(e.resource.name)),name:K(e.resource)||"",description:e.resource.description||void 0})})},e.resource.name))})]})]}),s.assetKeysUsing.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(z,{children:(0,l.jsx)(h.R2,{children:"Assets"})}),(0,l.jsxs)(y.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Asset key"})})}),(0,l.jsx)("tbody",{children:s.assetKeysUsing.map(e=>(0,l.jsx)("tr",{children:(0,l.jsx)("td",{children:(0,l.jsx)(A.H,{path:e.path,icon:"asset"},e.path.join("/"))})},e.path.join("/")))})]})]}),s.jobsOpsUsing.length>0&&(0,l.jsxs)(o.a,{children:[(0,l.jsx)(z,{children:(0,l.jsx)(h.R2,{children:"Jobs"})}),(0,l.jsxs)(y.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"Job name"}),(0,l.jsx)("th",{children:"Ops"})]})}),(0,l.jsx)("tbody",{children:s.jobsOpsUsing.map(e=>(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,l.jsx)(v.In,{name:"job",color:c.fR()}),(0,l.jsx)(w.N_,{to:(0,I.HG)(n,"/jobs/".concat(e.jobName)),children:(0,l.jsx)(b.A,{text:e.jobName})})]})}),(0,l.jsx)("td",{children:(0,l.jsx)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:e.opHandleIDs.map(s=>(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[(0,l.jsx)(v.In,{name:"op",color:c.fR()}),(0,l.jsx)(w.N_,{to:(0,I.HG)(n,"/jobs/".concat(e.jobName,"/").concat(s.split(".").join("/"))),children:(0,l.jsx)(b.A,{text:s})})]},s))})})]},e.jobName))})]})]}),[{name:"Schedules",objects:s.schedulesUsing,icon:(0,l.jsx)(v.In,{name:"schedule",color:c.fR()})},{name:"Sensors",objects:s.sensorsUsing,icon:(0,l.jsx)(v.In,{name:"sensors",color:c.fR()})}].filter(e=>{let{objects:s}=e;return s.length>0}).map(e=>{let{name:s,objects:r,icon:t}=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)(z,{children:(0,l.jsx)(h.R2,{children:s})}),(0,l.jsxs)(y.X,{children:[(0,l.jsx)("thead",{children:(0,l.jsx)("tr",{children:(0,l.jsx)("th",{children:"Name"})})}),(0,l.jsx)("tbody",{children:r.map(e=>(0,l.jsx)("tr",{children:(0,l.jsx)("td",{children:(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",display:"inline-flex",gap:8},style:{maxWidth:"100%"},children:[t,(0,l.jsx)(w.N_,{to:(0,I.HG)(n,"/".concat(s.toLowerCase(),"/").concat(e)),children:(0,l.jsx)(b.A,{text:e})})]})})},s+":"+e))})]})]},s)})]})},M=e=>{let{url:s,name:n,description:r}=e;return(0,l.jsxs)(o.a,{flex:{direction:"column"},children:[(0,l.jsxs)(o.a,{flex:{direction:"row",alignItems:"center",gap:4},style:{maxWidth:"100%"},children:[(0,l.jsx)(v.In,{name:"resource",color:c.iZ()}),(0,l.jsx)("div",{style:{maxWidth:"100%",whiteSpace:"nowrap",fontWeight:500},children:s?(0,l.jsx)(w.N_,{to:s,style:{overflow:"hidden"},children:(0,l.jsx)(b.A,{text:n})}):(0,l.jsx)(b.A,{text:n})})]}),(0,l.jsx)(h.MC,{children:r})]})},B=(0,N.J1)(F()),Z=(0,N.J1)(k(),B,O.z)}}]);
//# sourceMappingURL=2940.40665b2fa02e561f.js.map